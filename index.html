<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generate URL from Multiple Inputs</title>
    <link rel="stylesheet" href="style.css">
    <script>
      function generateURL() {
        try {
          // Checking for elements and their values
          var channel = encodeURIComponent(document.getElementById('channel').value);
          var amountgroup = document.getElementById('amountgroup').value;
          var frequency = document.getElementById('frequency').value;
          var baseURL = document.getElementById('url').value;
          var campaign = encodeURIComponent(document.getElementById('campaign').value);
          var defaultamount = document.getElementById('defaultamount').value;


          var amountgroupintMap = {
            lowest: 1,
            low: 2,
            medium: 3,
            high: 4,
            highest: 5
          };

          var default_value_int = amountgroupMap[amountgroup] || 3

          var amountgroupchar;
          if (frequency = "Monthly") {
            amountgroupchar = "m";
          } else if (frequency = "One-time") {
            amountgroupchar = "o";
          }  // Add ELSE statement//

          var default_value_code = amountgroupchar.concat(str(default_value_int));
          var default_value = document.getElementById('default').value;



          var ga_medium = channel;
          var ga_source;
          if (['SMS', 'Newsletter', 'Email'].includes(channel)) {
            ga_source = encodeURIComponent('Marketing Cloud');
          } else if (['Facebook', 'Google', 'Bing'].includes(channel)) {
            ga_source = encodeURIComponent('Advertising Studio');
          } else {
            ga_source = encodeURIComponent('Unknown');
          }
          var ad_content = encodeURIComponent(document.getElementById('adcontent').value);




          var generatedURL = `${baseURL}?&frequency=${frequency}&amountgroup=${amountgroup}&${default_value_code}=${default_value}&channel=${channe}&campaignid=${campaign}&source=${ga_source}&medium=${ga_medium}`;

          document.getElementById('generatedURL').value = generatedURL;
          console.log("Generated URL: ", generatedURL);
          return false;
        } catch (error) {
          console.error("Error generating URL: ", error);
          alert("Error generating URL: " + error.message);
          return false;
        }
      }

      function copyToClipboard() {
        var copyText = document.getElementById('generatedURL');
        copyText.select();
        document.execCommand('copy');

        var feedback = document.getElementById('copyFeedback');
        feedback.style.display = 'block';

        setTimeout(function() {
          feedback.style.display = 'none';
        }, 2000);
      }
    </script>
</head>
<body>

<h2>Generate URL</h2>

<form onsubmit="return generateURL()">
    <label for="url">URL:</label>
    <input type="text" id="url" name="url" required>

    <label for="frequency">Choose Donation Type:</label>
    <select id="frequency" name="frequency" required>
        <option value="" disabled selected>Select</option>
        <option value="One-time">Single Donation</option>
        <option value="Monthly">Regular Donation</option>
        <option value="Both">Both</option>
    </select>

    <label for="channel">Channel:</label>
    <select id="channel" name="channel" required>
        <option value="" disabled selected>Select</option>
        <option value="Newsletter">Newsletter</option>
        <option value="Facebook">Facebook</option>
        <option value="instagram">Instagram</option>
        <option value="fieldmarketing">Field Marketing</option>
        <option value="Google">Google</option>
        <option value="Bing">Bing</option>
        <option value="Email">Email</option>
        <option value="youtube">Youtube</option>
        <option value="SMS">SMS</option>
        <option value="Web">Web</option>
        <option value="Direct mail">Direct Mail</option>
    </select>

    <label for="campaignid">Campaign ID:</label>
    <input type="text" id="campaignid" name="campaignid" required>

    <label for="amountgroup">Amount group</label>
    <select id="amountgroup" name="amountgroup" required>
        <option value="" disabled selected>Select</option> 
        <option value="lowest">Lowest</option>
        <option value="low">Low</option>
        <option value="medium">Medium</option>
        <option value="high">High</option>
        <option value="highest">Highest</option>

    <label for="adcontent">GA Ad Content:</label>
    <input type="text" id="adcontent" name="adcontent" required>

    <input type="submit" value="Generate URL">
</form>

<div id="copyFeedback" class="copy-feedback" style="display: none;">URL copied to clipboard!</div>
<textarea id="generatedURL" class="generated-url-output" rows="3" readonly></textarea>
<button onclick="copyToClipboard()">Copy URL</button>

//update code//

</body>
</html>
